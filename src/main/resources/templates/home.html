<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title>Story Clone</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
<div class="container">
    <h2 class="mt-4">luv2code Company Home Page</h2>
    <hr>
    <p>Welcome to the luv2code company home page!</p>
    <hr>

    <!-- Display user information if available -->
    <div th:if="${user != null}">
        <h3>User Information</h3>
        <p><strong>ID:</strong> <span th:text="${user.id}"></span></p>
        <p><strong>Username:</strong> <span sec:authentication="principal.username"></span></p>
        <p><strong>Email:</strong> <span th:text="${user.email}"></span></p>
        <p><strong>Full Name:</strong> <span th:text="${user.fullName} ?: 'N/A'"></span></p>
        <p><strong>Avatar:</strong> <img th:src="${user.avatarUrl}" alt="User Avatar" width="100" height="100" /></p>
        <p><strong>Enabled:</strong> <span th:text="${user.enabled} ? 'Active' : 'Inactive'"></span></p>
        <p><strong>Created At:</strong> <span th:text="${#temporals.format(user.createdAt, 'yyyy-MM-dd HH:mm:ss')} ?: 'N/A'"></span></p>
        <p><strong>Updated At:</strong> <span th:text="${#temporals.format(user.updatedAt, 'yyyy-MM-dd HH:mm:ss')} ?: 'N/A'"></span></p>
        <p><strong>Role(s):</strong> <span sec:authentication="principal.authorities"></span></p>
    </div>

    <!-- Admin section -->
    <div sec:authorize="hasRole('ADMIN')" class="mt-3">
        <p class="text-info">(Only for Admin peeps)</p>
    </div>
    <!-- Profile button -->
    <div sec:authorize="hasRole('ADMIN')">
        <a th:href="@{/admin/dashboard}">
            <div class="btn btn-outline-primary mt-2">Admin Dashboard</div>
        </a>
    </div>

    <hr>

    <!-- Logout button -->
    <div sec:authorize="isAuthenticated()">
        <form action="#" th:action="@{/logout}" method="POST">
            <input type="submit" value="Logout" class="btn btn-outline-primary mt-2" />
        </form>
    </div>

    <!-- Profile button -->
    <div sec:authorize="isAuthenticated()">
        <a th:href="@{/user/profile}">
            <div class="btn btn-outline-primary mt-2">Information</div>
        </a>
    </div>

    <hr>

    <!-- Login button -->
    <div sec:authorize="!isAuthenticated()">
        <a th:href="@{/auth/login}">
            <div class="btn btn-outline-primary mt-2">Login</div>
        </a>
    </div>
</div>

</body>
</html>